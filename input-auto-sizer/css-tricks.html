<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Input Auto Sizer</title>
    <link rel="stylesheet" href="./css-tricks.css">
</head>
<body>

<div style="display: inline-grid; vertical-align: top; align-items: center; position: relative; border: solid 1px; padding: .25em .5em; margin: 5px;">
    <span>正常的 input</span>
    <input type="text" style="grid-area: 1 / 2;" size="4">
    <span class="input-sizer-expand" style="grid-area: 1 / 2;"></span>
</div>

<div>

    <label class="input-sizer">
        <span>Name: </span>
        <input type="text" onInput="this.parentNode.dataset.value = this.value" size="4" placeholder="John">
        <span class="input-sizer-expand"></span>
    </label>
    
</div>
<label class="input-sizer">
    <span>DOB: </span>
    <input type="text" onInput="this.parentNode.dataset.value = this.value" size="1" placeholder="5">
    <span class="input-sizer-expand"></span>
</label>

<label class="input-sizer stacked">
    <span>Text: </span>
    <textarea oninput="this.parentNode.dataset.value = this.value" rows="1" placeholder="hi"></textarea>
    <span class="input-sizer-expand"></span>
</label>


<script>
  Array.from(document.querySelectorAll('.input-sizer-expand'), (expand) => {
    const label = expand.parentNode;
    const input = label.getElementsByTagName('input')[0];

    function updateSize() {
      label.children[label.childElementCount - 1].textContent = input.value;
    }

    input.addEventListener('input', updateSize);
    updateSize();
  });
</script>

</body>
</html>
